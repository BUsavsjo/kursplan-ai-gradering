:root{
  /* Basfärger */
  --bg: #0b1220;           /* fallback initieras för dark, men växlas i media-query */
  --fg: #0f172a;
  --card: #ffffff;
  --muted: #64748b;
  --border: #e5e7eb;
  --accent: #3b82f6;       /* blå accent */
  --accent-fg: #ffffff;    
  --ring: rgba(59, 130, 246, .35);

  /* Yta och känsla */
  --radius: 12px;
  --radius-lg: 16px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.05);
  --shadow-md: 0 8px 16px rgba(0,0,0,.08);
  --shadow-lg: 0 18px 40px rgba(0,0,0,.12);
  --transition: 160ms cubic-bezier(.2,.7,.2,1);
}

/* Ljust läge som standard */
:root{
  --bg:#f8fafc;
  --fg:#0f172a;
  --card:#ffffff;
  --muted:#64748b;
  --border:#e5e7eb;
}

/* Mörkt läge automatiskt om användaren föredrar det */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b1220;
    --fg:#e5e7eb;
    --card:#0f172a;
    --muted:#94a3b8;
    --border:#1f2937;
    --accent:#60a5fa;   /* något ljusare i mörkt läge */
    --accent-fg:#0b1220;
    --ring: rgba(96, 165, 250, .35);
  }
}

*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{
  font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
  color:var(--fg);
  background:var(--bg);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Layout wrappers */
.wrap{max-width:1200px;margin:0 auto;padding:24px 16px}
.top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}

/* Rubriker & text */
h1{font-size:clamp(1.6rem, 1.2rem + 1vw, 2.1rem);margin:.2rem 0}
h2{font-size:clamp(1.3rem, 1.05rem + .6vw, 1.6rem);margin:.8rem 0 .4rem}
h3{font-size:clamp(1.1rem, .95rem + .4vw, 1.3rem);margin:.8rem 0 .4rem}
h4{margin:.6rem 0 .3rem}
.muted{color:var(--muted)}
.tiny{font-size:.85rem}

/* Header – sticky med lätt glas-effekt */
header{
  position:sticky;top:0;z-index:20;
  background:color-mix(in oklab, var(--card) 88%, transparent);
  backdrop-filter:saturate(1.1) blur(6px);
  border-bottom:1px solid var(--border);
}

/* Rader & grid */
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.row.between{justify-content:space-between}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:16px}
@media (max-width:960px){.grid{grid-template-columns:1fr}}

/* Kort / paneler */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  padding:16px;
  box-shadow:var(--shadow-sm);
  transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
}
.card:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}

/* Output-panelen (renderad kursplan) */
.output{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  padding:18px;
  box-shadow:var(--shadow-sm);
  white-space:normal;
}
.output:focus{outline:none; box-shadow:0 0 0 4px var(--ring);}
.output h2,.output h3{margin:1em 0 .5em}
.output p{margin:.5em 0}

/* Formelement */
input,select,textarea{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:10px;
  background:#fff;
  color:inherit;
  transition: box-shadow var(--transition), border-color var(--transition);
}
@media (prefers-color-scheme: dark){
  input,select,textarea{background:#0b1220;border-color:#273244}
}
input:focus,select:focus,textarea:focus{outline:none;box-shadow:0 0 0 4px var(--ring);border-color:color-mix(in oklab, var(--accent) 40%, var(--border))}

/* Buttons */
button{
  display:inline-flex;align-items:center;justify-content:center;gap:.5rem;
  padding:10px 14px;
  border:1px solid color-mix(in oklab, var(--accent) 15%, var(--border));
  border-radius:10px;
  background:var(--accent);
  color:var(--accent-fg);
  cursor:pointer;
  box-shadow:var(--shadow-sm);
  transition: transform var(--transition), box-shadow var(--transition), background var(--transition), border-color var(--transition);
}
button:hover{transform:translateY(-1px);box-shadow:var(--shadow-md)}
button:active{transform:translateY(0)}
button.secondary{background:transparent;color:var(--fg)}
button.secondary:hover{background:color-mix(in oklab, var(--accent) 8%, transparent)}

/* Små statuskomponenter */
.badge, .chip{
  display:inline-flex;gap:6px;align-items:center;
  border:1px solid var(--border);
  padding:4px 10px;
  border-radius:9999px;
  background:#fff;
}
@media (prefers-color-scheme: dark){
  .badge, .chip{background:#0f172a}
}
.badge.selected{background:var(--fg);color:#fff;border-color:var(--fg)}

/* Tabeller */
.tbl{width:100%;border-collapse:collapse}
.tbl th,.tbl td{padding:8px;text-align:left;border-top:1px solid var(--border)}

/* Uppgiftsblock & nivålistor (om du använder dem) */
.assign{border:1px solid var(--border);border-radius:12px;padding:12px;margin:12px 0}
.levels{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
@media (max-width:720px){.levels{grid-template-columns:1fr}}
.lvl{display:flex;gap:10px}
.icon{font-size:20px;line-height:1.2}
.preview{white-space:pre-wrap}

/* Verktygsrad */
.toolbar{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}

/* Animeringspreferenser */
@media (prefers-reduced-motion: reduce){
  *{transition:none !important}
}
